# Firebase Database Setup

This guide will help you recreate your Firebase Firestore database after accidental deletion.

## Option 1: Basic Database Setup (No Authentication)

This option will create the necessary collections and sample data in Firestore, but won't create users in Firebase Authentication.

### Step 1: Install Dependencies

```bash
npm install
```

### Step 2: Run the Initialization Script

```bash
npm run init-firebase
```

This will create the following collections with sample data:
- `users`
- `bounties`
- `submissions`

## Option 2: Complete Setup (Including Authentication)

This option will create both Firestore collections and Firebase Authentication users.

### Step 1: Generate Firebase Admin Service Account Key

1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Select your project
3. Navigate to Project Settings > Service accounts
4. Click "Generate new private key"
5. Save the file as `firebase-service-account.json` in the project root

### Step 2: Install Firebase Admin SDK

```bash
npm install firebase-admin
```

### Step 3: Create the Admin Initialization Script

Create a file at `scripts/init-firebase-auth.js` with the content below:

```javascript
// See separate file for content: scripts/init-firebase-auth.js
```

### Step 4: Run the Admin Initialization Script

```bash
npm run init-firebase-auth
```

This will:
1. Create sample users in Firebase Authentication
2. Create corresponding user documents in Firestore
3. Initialize bounties and submissions collections

## Manually Creating Collections

If you prefer to create collections manually through the Firebase Console:

### Users Collection

```
users (collection)
  |
  └── [user_uid] (document ID - auto-generated by Firebase Auth)
      ├── uid: string (same as document ID)
      ├── email: string
      ├── role: string (either "talent" or "sponsor")
      ├── profileData: object
      │   ├── firstName: string
      │   ├── lastName: string
      │   ├── username: string
      │   └── profileImage: string (optional)
      ├── wallet: object | null
      │   ├── address: string
      │   ├── publicKey: string
      │   └── network: string (e.g., "TESTNET")
      ├── createdAt: timestamp
      └── lastLogin: timestamp
```

### Bounties Collection

```
bounties (collection)
  |
  └── [bounty_id] (document ID - numeric string ID from blockchain)
      ├── title: string
      ├── description: string
      ├── category: string
      ├── skills: array of strings
      ├── status: string
      ├── reward: object
      │   ├── amount: string
      │   └── asset: string
      ├── distribution: array of objects
      │   ├── percentage: number
      │   └── position: number
      ├── owner: string
      ├── submissionDeadline: number
      ├── judgingDeadline: number
      ├── createdAt: timestamp
      └── updatedAt: timestamp
```

### Submissions Collection

```
submissions (collection)
  |
  └── [submission_id] (document ID - auto-generated)
      ├── bountyId: string (references bounty ID)
      ├── userId: string (for app submissions) OR applicantAddress: string (for blockchain submissions)
      ├── content: string (submission details)
      ├── status: string (e.g., "PENDING")
      ├── submittedAt: timestamp OR createdAt: timestamp
      └── updatedAt: timestamp (optional)
``` 